
ğŸ”„ Stage 1: Generating Variations (Batched - 1 per batch)...
ğŸ“‚ Loaded 2 input problems

ğŸ“¦ Processing batch 1/2 (1 problems)
  ğŸ“ Processing: 1 problem(s) (cluster variations disabled)
    â­ï¸  Phase 1: Skipping candidate detection (use_cluster_variations=False)...
ğŸ¯ Creating model client for variations: phi-4 with rits
   max_model_len: 5000, max_new_tokens: 1000
ğŸ¯ Creating model client: phi-4 with rits
RITSClient initialized with model: microsoft/phi-4, max_new_tokens: 1000

    ğŸ” Testing API connection before starting variation generation...

ğŸ”Œ Testing RITS API connection for phi-4...
âœ… RITS API test successful!
   Model: microsoft/phi-4
   Response time: 64.57s
   Test response: OK, I can hear you! How can I assist you today?
    âœ… API test passed - proceeding with variation generation

âœ… SymPy loaded for mathematical expression parsing
âœ… spaCy loaded for dependency parsing
âœ… WordNet loaded for semantic similarity
âœ… SymPy available for mathematical analysis
âœ… Consistency enhancement enabled
âœ… Model client provided for NL variations
      Problem 1: Using 0 pre-detected candidates
    ğŸ”„ Phase 2: Generating variations (cluster variations disabled)...
      â­ï¸  Part 1: Skipping generic transformations (use_generic=False)...
      â­ï¸  Part 2: Skipping cluster-based variations (use_cluster_variations=False)...
      ğŸ”„ Part 3: Long context variations (for prompts >500 chars)...
        ğŸš€ Batching long context variations across 1 problems...
        ğŸ“‹ Found 1 long context problems (out of 1 total)
        âœ… Applied 6 deterministic format variations
          Processing long context batch 1/13 (1 prompts)...
Generating responses for 1 prompts using RITS...
          Processing long context batch 2/13 (1 prompts)...
Generating responses for 1 prompts using RITS...
          Processing long context batch 3/13 (1 prompts)...
Generating responses for 1 prompts using RITS...
          Processing long context batch 4/13 (1 prompts)...
Generating responses for 1 prompts using RITS...
          Processing long context batch 5/13 (1 prompts)...
Generating responses for 1 prompts using RITS...
          Processing long context batch 6/13 (1 prompts)...
Generating responses for 1 prompts using RITS...
          Processing long context batch 7/13 (1 prompts)...
Generating responses for 1 prompts using RITS...
          Processing long context batch 8/13 (1 prompts)...
Generating responses for 1 prompts using RITS...
          Processing long context batch 9/13 (1 prompts)...
Generating responses for 1 prompts using RITS...
          Processing long context batch 10/13 (1 prompts)...
Generating responses for 1 prompts using RITS...
          Processing long context batch 11/13 (1 prompts)...
Generating responses for 1 prompts using RITS...
          Processing long context batch 12/13 (1 prompts)...
Generating responses for 1 prompts using RITS...
          Processing long context batch 13/13 (1 prompts)...
Generating responses for 1 prompts using RITS...
        âœ… Long context batch: 11/13 successful
        âœ… Long context variations total: 11 LLM-based variations
    ğŸ”„ Phase 3: Creating entries for all problems...
      Problem 1: 11 total variations
â±ï¸  Batch 1 completed in 154.78s (154.78s per problem)
ğŸ’¾ Saved 12 entries after variations_batch_1 to ../data/demo_output_semantic.json
ğŸ’¾ Saved after batch 1

ğŸ“¦ Processing batch 2/2 (1 problems)
  ğŸ“ Processing: 1 problem(s) (cluster variations disabled)
    â­ï¸  Phase 1: Skipping candidate detection (use_cluster_variations=False)...
ğŸ¯ Creating model client for variations: phi-4 with rits
   max_model_len: 5000, max_new_tokens: 1000
ğŸ¯ Creating model client: phi-4 with rits
RITSClient initialized with model: microsoft/phi-4, max_new_tokens: 1000
âœ… SymPy loaded for mathematical expression parsing
âœ… spaCy loaded for dependency parsing
âœ… WordNet loaded for semantic similarity
âœ… SymPy available for mathematical analysis
âœ… Consistency enhancement enabled
âœ… Model client provided for NL variations
      Problem 2: Using 0 pre-detected candidates
    ğŸ”„ Phase 2: Generating variations (cluster variations disabled)...
      â­ï¸  Part 1: Skipping generic transformations (use_generic=False)...
      â­ï¸  Part 2: Skipping cluster-based variations (use_cluster_variations=False)...
      ğŸ”„ Part 3: Long context variations (for prompts >500 chars)...
        ğŸš€ Batching long context variations across 1 problems...
        ğŸ“‹ Found 1 long context problems (out of 1 total)
        âœ… Applied 6 deterministic format variations
          Processing long context batch 1/13 (1 prompts)...
Generating responses for 1 prompts using RITS...
          Processing long context batch 2/13 (1 prompts)...
Generating responses for 1 prompts using RITS...
          Processing long context batch 3/13 (1 prompts)...
Generating responses for 1 prompts using RITS...
          Processing long context batch 4/13 (1 prompts)...
Generating responses for 1 prompts using RITS...
          Processing long context batch 5/13 (1 prompts)...
Generating responses for 1 prompts using RITS...
          Processing long context batch 6/13 (1 prompts)...
Generating responses for 1 prompts using RITS...
          Processing long context batch 7/13 (1 prompts)...
Generating responses for 1 prompts using RITS...
          Processing long context batch 8/13 (1 prompts)...
Generating responses for 1 prompts using RITS...
          Processing long context batch 9/13 (1 prompts)...
Generating responses for 1 prompts using RITS...
          Processing long context batch 10/13 (1 prompts)...
Generating responses for 1 prompts using RITS...
          Processing long context batch 11/13 (1 prompts)...
Generating responses for 1 prompts using RITS...
          Processing long context batch 12/13 (1 prompts)...
Generating responses for 1 prompts using RITS...
          Processing long context batch 13/13 (1 prompts)...
Generating responses for 1 prompts using RITS...
        âœ… Long context batch: 13/13 successful
        âœ… Long context variations total: 13 LLM-based variations
    ğŸ”„ Phase 3: Creating entries for all problems...
      Problem 2: 13 total variations
â±ï¸  Batch 2 completed in 79.56s (79.56s per problem)
ğŸ’¾ Saved 26 entries after variations_batch_2 to ../data/demo_output_semantic.json
ğŸ’¾ Saved after batch 2
ğŸ’¾ Saved 26 entries after variations to ../data/demo_output_semantic.json
âœ… Stage 1 complete: Generated 26 total entries across 2 batches
â±ï¸  Stage 1 timing: 3m 54.38s

ğŸ”„ VALIDATION STAGE: Validating All Variations...
   This stage validates ALL variation types: generic, combinations, direct, etc.
ğŸ“‚ Loaded 26 existing entries from ../data/demo_output_semantic.json
ğŸ¯ Creating model client for validation: llama_3_3_70b with rits
   max_model_len: 5000, max_new_tokens: 1000
ğŸ¯ Creating model client: llama_3_3_70b with rits
RITSClient initialized with model: meta-llama/llama-3-3-70b-instruct, max_new_tokens: 1000
âœ… SymPy loaded for mathematical expression parsing
âœ… spaCy loaded for dependency parsing
âœ… WordNet loaded for semantic similarity
âœ… SymPy available for mathematical analysis
âœ… Consistency enhancement enabled
âœ… Model client provided for NL variations
ğŸ“Š Found 2 baseline problems with variations
ğŸ” Validating 24 variations across 2 problems...

ğŸ” GLOBAL VALIDATION: Validating 24 variations across 2 problems...
   Batch size: 1, Total batches: 24
   ğŸ“‹ Using variation model for validation...
   ğŸ”„ Processing validation batch 1/24 (1 variations)...
Generating responses for 1 prompts using RITS...
   ğŸ”„ Processing validation batch 2/24 (1 variations)...
Generating responses for 1 prompts using RITS...
   ğŸ”„ Processing validation batch 3/24 (1 variations)...
Generating responses for 1 prompts using RITS...
   ğŸ”„ Processing validation batch 4/24 (1 variations)...
Generating responses for 1 prompts using RITS...
   ğŸ”„ Processing validation batch 5/24 (1 variations)...
Generating responses for 1 prompts using RITS...
   ğŸ”„ Processing validation batch 6/24 (1 variations)...
Generating responses for 1 prompts using RITS...
   ğŸ”„ Processing validation batch 7/24 (1 variations)...
Generating responses for 1 prompts using RITS...
   ğŸ”„ Processing validation batch 8/24 (1 variations)...
Generating responses for 1 prompts using RITS...
   ğŸ”„ Processing validation batch 9/24 (1 variations)...
Generating responses for 1 prompts using RITS...
   ğŸ”„ Processing validation batch 10/24 (1 variations)...
Generating responses for 1 prompts using RITS...
   ğŸ”„ Processing validation batch 11/24 (1 variations)...
Generating responses for 1 prompts using RITS...
   ğŸ”„ Processing validation batch 12/24 (1 variations)...
Generating responses for 1 prompts using RITS...
   ğŸ”„ Processing validation batch 13/24 (1 variations)...
Generating responses for 1 prompts using RITS...
   ğŸ”„ Processing validation batch 14/24 (1 variations)...
Generating responses for 1 prompts using RITS...
   ğŸ”„ Processing validation batch 15/24 (1 variations)...
Generating responses for 1 prompts using RITS...
   ğŸ”„ Processing validation batch 16/24 (1 variations)...
Generating responses for 1 prompts using RITS...
   ğŸ”„ Processing validation batch 17/24 (1 variations)...
Generating responses for 1 prompts using RITS...
   ğŸ”„ Processing validation batch 18/24 (1 variations)...
Generating responses for 1 prompts using RITS...
   ğŸ”„ Processing validation batch 19/24 (1 variations)...
Generating responses for 1 prompts using RITS...
   ğŸ”„ Processing validation batch 20/24 (1 variations)...
Generating responses for 1 prompts using RITS...
   ğŸ”„ Processing validation batch 21/24 (1 variations)...
Generating responses for 1 prompts using RITS...
   ğŸ”„ Processing validation batch 22/24 (1 variations)...
Generating responses for 1 prompts using RITS...
   ğŸ”„ Processing validation batch 23/24 (1 variations)...
Generating responses for 1 prompts using RITS...
   ğŸ”„ Processing validation batch 24/24 (1 variations)...
Generating responses for 1 prompts using RITS...
   âœ… Global validation complete: 1/24 variations need correction
        ğŸ”§ Rectifying 1 invalid variations...

ğŸ”§ BATCHED RECTIFICATION: Correcting 1 invalid variations across 1 problems...
   Batch size: 1, Total batches: 1
   ğŸ“‹ Using variation model for rectification...
   ğŸ”„ Processing rectification batch 1/1 (1 variations)...
Generating responses for 1 prompts using RITS...
   âœ… Batch rectification completed: 1/1 variations corrected
        âœ… Rectified 1 invalid variations
ğŸ’¾ Saved 26 entries after validation to ../data/demo_output_semantic.json
âœ… VALIDATION STAGE complete: 24 validated variations remaining
â±ï¸  Validation timing: 12m 3.83s

ğŸ”„ Stage 2: Generating Model Responses (Optimized)...
ğŸ¯ Creating model client: granite-3-3-8b with rits
RITSClient initialized with model: ibm-granite/granite-3.3-8b-instruct, max_new_tokens: 1000
âœ… Initialized VariationAnswerGenerator
   Client: rits
   Model: granite-3-3-8b
   RITS batch size: 1
ğŸ“ Generating responses for 26 entries...
   ğŸš€ OPTIMIZATION: Generate baseline answers once per problem, reuse across variants
   ğŸ“Š Found 2 unique problems
   ğŸš€ BATCH PROCESSING: Generating responses for 26 problems in batches...
ğŸ”„ Generating responses for 26 variations...
   Settings: batch_size=1, max_workers=1
  ğŸ“¤ Processing batch 1/26 (1 variations)...
Generating responses for 1 prompts using RITS...
    ğŸ“¥ Batch 1 completed in 3.49s
    âœ… 1/1 successful in batch 1
  ğŸ“¤ Processing batch 2/26 (1 variations)...
Generating responses for 1 prompts using RITS...
    ğŸ“¥ Batch 2 completed in 4.41s
    âœ… 1/1 successful in batch 2
  ğŸ“¤ Processing batch 3/26 (1 variations)...
Generating responses for 1 prompts using RITS...
    ğŸ“¥ Batch 3 completed in 4.19s
    âœ… 1/1 successful in batch 3
  ğŸ“¤ Processing batch 4/26 (1 variations)...
Generating responses for 1 prompts using RITS...
    ğŸ“¥ Batch 4 completed in 4.03s
    âœ… 1/1 successful in batch 4
  ğŸ“¤ Processing batch 5/26 (1 variations)...
Generating responses for 1 prompts using RITS...
    ğŸ“¥ Batch 5 completed in 4.01s
    âœ… 1/1 successful in batch 5
  ğŸ“¤ Processing batch 6/26 (1 variations)...
Generating responses for 1 prompts using RITS...
    ğŸ“¥ Batch 6 completed in 5.08s
    âœ… 1/1 successful in batch 6
  ğŸ“¤ Processing batch 7/26 (1 variations)...
Generating responses for 1 prompts using RITS...
    ğŸ“¥ Batch 7 completed in 4.20s
    âœ… 1/1 successful in batch 7
  ğŸ“¤ Processing batch 8/26 (1 variations)...
Generating responses for 1 prompts using RITS...
    ğŸ“¥ Batch 8 completed in 4.14s
    âœ… 1/1 successful in batch 8
  ğŸ“¤ Processing batch 9/26 (1 variations)...
Generating responses for 1 prompts using RITS...
    ğŸ“¥ Batch 9 completed in 5.44s
    âœ… 1/1 successful in batch 9
  ğŸ“¤ Processing batch 10/26 (1 variations)...
Generating responses for 1 prompts using RITS...
    ğŸ“¥ Batch 10 completed in 4.50s
    âœ… 1/1 successful in batch 10
  ğŸ“¤ Processing batch 11/26 (1 variations)...
Generating responses for 1 prompts using RITS...
    ğŸ“¥ Batch 11 completed in 4.47s
    âœ… 1/1 successful in batch 11
  ğŸ“¤ Processing batch 12/26 (1 variations)...
Generating responses for 1 prompts using RITS...
    ğŸ“¥ Batch 12 completed in 4.59s
    âœ… 1/1 successful in batch 12
  ğŸ“¤ Processing batch 13/26 (1 variations)...
Generating responses for 1 prompts using RITS...
    ğŸ“¥ Batch 13 completed in 11.03s
    âœ… 1/1 successful in batch 13
  ğŸ“¤ Processing batch 14/26 (1 variations)...
Generating responses for 1 prompts using RITS...
    ğŸ“¥ Batch 14 completed in 8.03s
    âœ… 1/1 successful in batch 14
  ğŸ“¤ Processing batch 15/26 (1 variations)...
Generating responses for 1 prompts using RITS...
    ğŸ“¥ Batch 15 completed in 8.12s
    âœ… 1/1 successful in batch 15
  ğŸ“¤ Processing batch 16/26 (1 variations)...
Generating responses for 1 prompts using RITS...
    ğŸ“¥ Batch 16 completed in 9.33s
    âœ… 1/1 successful in batch 16
  ğŸ“¤ Processing batch 17/26 (1 variations)...
Generating responses for 1 prompts using RITS...
    ğŸ“¥ Batch 17 completed in 7.04s
    âœ… 1/1 successful in batch 17
  ğŸ“¤ Processing batch 18/26 (1 variations)...
Generating responses for 1 prompts using RITS...
    ğŸ“¥ Batch 18 completed in 7.40s
    âœ… 1/1 successful in batch 18
  ğŸ“¤ Processing batch 19/26 (1 variations)...
Generating responses for 1 prompts using RITS...
    ğŸ“¥ Batch 19 completed in 5.34s
    âœ… 1/1 successful in batch 19
  ğŸ“¤ Processing batch 20/26 (1 variations)...
Generating responses for 1 prompts using RITS...
    ğŸ“¥ Batch 20 completed in 8.57s
    âœ… 1/1 successful in batch 20
  ğŸ“¤ Processing batch 21/26 (1 variations)...
Generating responses for 1 prompts using RITS...
    ğŸ“¥ Batch 21 completed in 6.86s
    âœ… 1/1 successful in batch 21
  ğŸ“¤ Processing batch 22/26 (1 variations)...
Generating responses for 1 prompts using RITS...
    ğŸ“¥ Batch 22 completed in 7.11s
    âœ… 1/1 successful in batch 22
  ğŸ“¤ Processing batch 23/26 (1 variations)...
Generating responses for 1 prompts using RITS...
    ğŸ“¥ Batch 23 completed in 6.20s
    âœ… 1/1 successful in batch 23
  ğŸ“¤ Processing batch 24/26 (1 variations)...
Generating responses for 1 prompts using RITS...
    ğŸ“¥ Batch 24 completed in 9.97s
    âœ… 1/1 successful in batch 24
  ğŸ“¤ Processing batch 25/26 (1 variations)...
Generating responses for 1 prompts using RITS...
    ğŸ“¥ Batch 25 completed in 10.02s
    âœ… 1/1 successful in batch 25
  ğŸ“¤ Processing batch 26/26 (1 variations)...
Generating responses for 1 prompts using RITS...
    ğŸ“¥ Batch 26 completed in 4.74s
    âœ… 1/1 successful in batch 26
ğŸ‰ Total: 26/26 successful responses
   âœ… Generated 26 responses using batch processing
     âœ… Baseline cached for problem_0
     âœ… Variant processed for problem_0_variant_1
     âœ… Variant processed for problem_0_variant_2
     âœ… Variant processed for problem_0_variant_3
     âœ… Variant processed for problem_0_variant_4
     âœ… Variant processed for problem_0_variant_5
     âœ… Variant processed for problem_0_variant_6
     âœ… Variant processed for problem_0_variant_7
     âœ… Variant processed for problem_0_variant_8
     âœ… Variant processed for problem_0_variant_9
     âœ… Variant processed for problem_0_variant_10
     âœ… Variant processed for problem_0_variant_11
     âœ… Baseline cached for problem_1
     âœ… Variant processed for problem_1_variant_1
     âœ… Variant processed for problem_1_variant_2
     âœ… Variant processed for problem_1_variant_3
     âœ… Variant processed for problem_1_variant_4
     âœ… Variant processed for problem_1_variant_5
     âœ… Variant processed for problem_1_variant_6
     âœ… Variant processed for problem_1_variant_7
     âœ… Variant processed for problem_1_variant_8
     âœ… Variant processed for problem_1_variant_9
     âœ… Variant processed for problem_1_variant_10
     âœ… Variant processed for problem_1_variant_11
     âœ… Variant processed for problem_1_variant_12
     âœ… Variant processed for problem_1_variant_13
ğŸ’¾ Saved 26 entries after responses to ../data/demo_output_semantic.json
âœ… Stage 2 complete: Added optimized responses to unified file

ğŸ”„ Stage 3: Adding Evaluation Metrics...
ğŸ”„ Using per-problem evaluation for RITS
âœ… Using LLM judge for answer evaluation
ğŸ¯ Creating model client: llama_3_3_70b with rits
RITSClient initialized with model: meta-llama/llama-3-3-70b-instruct, max_new_tokens: 1000
âœ… Initialized LLMJudgeAnswerChecker
   Client: rits
   Model: llama_3_3_70b
   Batch size: 1
        ğŸ“¦ Batching 1 judge prompts...
Generating responses for 1 prompts using RITS...
ğŸ”„ Using RITS batch size: 8
ğŸ§‘â€âš–ï¸ Batched LLM judge evaluation: 22 comparisons in batches of 8
  ğŸ“¦ Evaluating batch 1/3 (8 comparisons)
        ğŸ“¦ Batching 8 judge prompts...
Generating responses for 8 prompts using RITS...
  ğŸ“¦ Evaluating batch 2/3 (8 comparisons)
        ğŸ“¦ Batching 8 judge prompts...
Generating responses for 8 prompts using RITS...
  ğŸ“¦ Evaluating batch 3/3 (6 comparisons)
        ğŸ“¦ Batching 6 judge prompts...
Generating responses for 6 prompts using RITS...
     ğŸ“ˆ POSITIVE DRIFT: problem_0_variant_1
     ğŸ“ˆ POSITIVE DRIFT: problem_0_variant_4
     ğŸ“ˆ POSITIVE DRIFT: problem_0_variant_5
     ğŸ“ˆ POSITIVE DRIFT: problem_0_variant_6
     ğŸ“ˆ POSITIVE DRIFT: problem_0_variant_8
     ğŸ“ˆ POSITIVE DRIFT: problem_0_variant_9
     ğŸ“ˆ POSITIVE DRIFT: problem_0_variant_10
     ğŸ“ˆ POSITIVE DRIFT: problem_0_variant_11
        ğŸ“¦ Batching 1 judge prompts...
Generating responses for 1 prompts using RITS...
ğŸ”„ Using RITS batch size: 8
ğŸ§‘â€âš–ï¸ Batched LLM judge evaluation: 26 comparisons in batches of 8
  ğŸ“¦ Evaluating batch 1/4 (8 comparisons)
        ğŸ“¦ Batching 8 judge prompts...
Generating responses for 8 prompts using RITS...
  ğŸ“¦ Evaluating batch 2/4 (8 comparisons)
        ğŸ“¦ Batching 8 judge prompts...
Generating responses for 8 prompts using RITS...
  ğŸ“¦ Evaluating batch 3/4 (8 comparisons)
        ğŸ“¦ Batching 8 judge prompts...
Generating responses for 8 prompts using RITS...
  ğŸ“¦ Evaluating batch 4/4 (2 comparisons)
        ğŸ“¦ Batching 2 judge prompts...
Generating responses for 2 prompts using RITS...
ğŸ’¾ Saved 26 entries after evaluation to ../data/demo_output_semantic.json
âœ… Stage 3 complete: Added LLM judge evaluation with drift analysis to unified file
