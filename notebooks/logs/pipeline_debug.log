
ğŸ”„ Stage 1: Generating Variations (Batched - 1 per batch)...
ğŸ“‚ Loaded 2 input problems

ğŸ“¦ Processing batch 1/2 (1 problems)
  ğŸ“ Processing: 1 problem(s) (cluster variations disabled)
    â­ï¸  Phase 1: Skipping candidate detection (use_cluster_variations=False)...
ğŸ¯ Creating model client for variations: phi-4 with rits
   max_model_len: 5000, max_new_tokens: 1000
ğŸ¯ Creating model client: phi-4 with rits
RITSClient initialized with model: microsoft/phi-4, max_new_tokens: 1000
ğŸ’¾ Cached client for rits:phi-4

    ğŸ” Testing API connection before starting variation generation...

ğŸ”Œ Testing RITS API connection for phi-4...
âœ… RITS API test successful!
   Model: microsoft/phi-4
   Response time: 1.19s
   Test response: OK, I can hear you! How can I assist you today?
    âœ… API test passed - proceeding with variation generation

âœ… SymPy loaded for mathematical expression parsing
âœ… spaCy loaded for dependency parsing
âœ… WordNet loaded for semantic similarity
âœ… SymPy available for mathematical analysis
âœ… Consistency enhancement enabled
âœ… Model client provided for NL variations
      Problem 1: Using 0 pre-detected candidates
    ğŸ”„ Phase 2: Generating variations (cluster variations disabled)...
      â­ï¸  Part 1: Skipping generic transformations (use_generic=False)...
      â­ï¸  Part 2: Skipping cluster-based variations (use_cluster_variations=False)...
      â­ï¸  Part 3: Skipping long context variations (use_long_context=False)...
    ğŸ”„ Phase 3: Creating entries for all problems...
      Problem 1: 0 total variations
â±ï¸  Batch 1 completed in 6.82s (6.82s per problem)
ğŸ’¾ Saved 44 entries after variations_batch_1 to ../data/demo_output_semantic.json
ğŸ’¾ Saved after batch 1

ğŸ“¦ Processing batch 2/2 (1 problems)
  ğŸ“ Processing: 1 problem(s) (cluster variations disabled)
    â­ï¸  Phase 1: Skipping candidate detection (use_cluster_variations=False)...
â™»ï¸  Reusing cached client for variations: phi-4
âœ… SymPy loaded for mathematical expression parsing
âœ… spaCy loaded for dependency parsing
âœ… WordNet loaded for semantic similarity
âœ… SymPy available for mathematical analysis
âœ… Consistency enhancement enabled
âœ… Model client provided for NL variations
      Problem 2: Using 0 pre-detected candidates
    ğŸ”„ Phase 2: Generating variations (cluster variations disabled)...
      â­ï¸  Part 1: Skipping generic transformations (use_generic=False)...
      â­ï¸  Part 2: Skipping cluster-based variations (use_cluster_variations=False)...
      â­ï¸  Part 3: Skipping long context variations (use_long_context=False)...
    ğŸ”„ Phase 3: Creating entries for all problems...
      Problem 2: 0 total variations
â±ï¸  Batch 2 completed in 1.83s (1.83s per problem)
ğŸ’¾ Saved 45 entries after variations_batch_2 to ../data/demo_output_semantic.json
ğŸ’¾ Saved after batch 2
ğŸ’¾ Saved 45 entries after variations to ../data/demo_output_semantic.json
âœ… Stage 1 complete: Generated 45 total entries across 2 batches
â±ï¸  Stage 1 timing: 0m 8.70s

ğŸ”„ VALIDATION STAGE: Validating All Variations...
   This stage validates ALL variation types: generic, combinations, direct, etc.
ğŸ“‚ Loaded 45 existing entries from ../data/demo_output_semantic.json
ğŸ¯ Creating model client for validation: llama_3_3_70b with rits
   max_model_len: 5000, max_new_tokens: 1000
ğŸ¯ Creating model client: llama_3_3_70b with rits
RITSClient initialized with model: meta-llama/llama-3-3-70b-instruct, max_new_tokens: 1000
ğŸ’¾ Cached client for rits:llama_3_3_70b
âœ… SymPy loaded for mathematical expression parsing
âœ… spaCy loaded for dependency parsing
âœ… WordNet loaded for semantic similarity
âœ… SymPy available for mathematical analysis
âœ… Consistency enhancement enabled
âœ… Model client provided for NL variations
ğŸ“Š Found 2 baseline problems with variations
ğŸ” Validating 37 variations across 2 problems...

ğŸ” GLOBAL VALIDATION: Validating 37 variations across 2 problems...
   Batch size: 1, Total batches: 37
   ğŸš€ Using TRUE cross-problem batching (sending 1 prompts per LLM call)
   ğŸ“‹ Using variation model for validation...
   ğŸ“ Built 37 validation prompts
Generating responses for 1 prompts using RITS...
Generating responses for 1 prompts using RITS...
Generating responses for 1 prompts using RITS...
Generating responses for 1 prompts using RITS...
Generating responses for 1 prompts using RITS...
Generating responses for 1 prompts using RITS...
Generating responses for 1 prompts using RITS...
Generating responses for 1 prompts using RITS...
Generating responses for 1 prompts using RITS...
Generating responses for 1 prompts using RITS...
Generating responses for 1 prompts using RITS...
Generating responses for 1 prompts using RITS...
Generating responses for 1 prompts using RITS...
Generating responses for 1 prompts using RITS...
Generating responses for 1 prompts using RITS...
Generating responses for 1 prompts using RITS...
Generating responses for 1 prompts using RITS...
Generating responses for 1 prompts using RITS...
Generating responses for 1 prompts using RITS...
Generating responses for 1 prompts using RITS...
Generating responses for 1 prompts using RITS...
Generating responses for 1 prompts using RITS...
Generating responses for 1 prompts using RITS...
Generating responses for 1 prompts using RITS...
Generating responses for 1 prompts using RITS...
Generating responses for 1 prompts using RITS...
Generating responses for 1 prompts using RITS...
Generating responses for 1 prompts using RITS...
Generating responses for 1 prompts using RITS...
Generating responses for 1 prompts using RITS...
Generating responses for 1 prompts using RITS...
Generating responses for 1 prompts using RITS...
Generating responses for 1 prompts using RITS...
Generating responses for 1 prompts using RITS...
Generating responses for 1 prompts using RITS...
Generating responses for 1 prompts using RITS...
Generating responses for 1 prompts using RITS...
   âœ… Global validation complete: 0/37 variations marked invalid
âœ… All variations are valid
ğŸ’¾ Saved 45 entries after validation to ../data/demo_output_semantic.json
âœ… VALIDATION STAGE complete: 37 validated variations remaining
â±ï¸  Validation timing: 0m 34.93s

ğŸ”„ Stage 2: Generating Model Responses (Optimized)...
ğŸ¯ Creating model client: granite-3-3-8b with rits
RITSClient initialized with model: ibm-granite/granite-3.3-8b-instruct, max_new_tokens: 1000
âœ… Initialized VariationAnswerGenerator
   Client: rits
   Model: granite-3-3-8b
   RITS batch size: 1
   â„¹ï¸  Found 41 entries with existing responses (skipping)
   ğŸ’¡ To regenerate responses, use --force-regenerate or set force_regenerate=True
ğŸ“ Generating responses for 2 entries...
   ğŸš€ OPTIMIZATION: Generate baseline answers once per problem, reuse across variants
   ğŸ“Š Found 2 unique problems
   ğŸš€ BATCH PROCESSING: Generating responses for 2 problems in batches...
ğŸ”„ Generating responses for 2 variations...
   Settings: batch_size=1, max_workers=1
  ğŸ“¤ Processing batch 1/2 (1 variations)...
Generating responses for 1 prompts using RITS...
    ğŸ“¥ Batch 1 completed in 3.20s
    âœ… 1/1 successful in batch 1
  ğŸ“¤ Processing batch 2/2 (1 variations)...
Generating responses for 1 prompts using RITS...
    ğŸ“¥ Batch 2 completed in 6.56s
    âœ… 1/1 successful in batch 2
ğŸ‰ Total: 2/2 successful responses
   âœ… Generated 2 responses using batch processing
     âœ… Baseline cached for problem_0
     âœ… Baseline cached for problem_1
ğŸ’¾ Saved 45 entries after responses to ../data/demo_output_semantic.json
âœ… Stage 2 complete: Added optimized responses to unified file

ğŸ”„ Stage 3: Adding Evaluation Metrics...
âš ï¸ Skipping entry without problem_id: ['id', 'problem', 'semantic_clusters', 'is_baseline', 'is_variant', 'validation_complete']
âš ï¸ Skipping entry without problem_id: ['id', 'problem', 'semantic_clusters', 'is_baseline', 'is_variant', 'validation_complete']
ğŸ”„ Using per-problem evaluation for RITS
âœ… Using LLM judge for answer evaluation
ğŸ¯ Creating model client: llama_3_3_70b with rits
RITSClient initialized with model: meta-llama/llama-3-3-70b-instruct, max_new_tokens: 1000
âœ… Initialized LLMJudgeAnswerChecker
   Client: rits
   Model: llama_3_3_70b
   Batch size: 1
        ğŸ“¦ Batching 1 judge prompts...
Generating responses for 1 prompts using RITS...
ğŸ”„ Using RITS batch size: 8
ğŸ§‘â€âš–ï¸ Batched LLM judge evaluation: 54 comparisons in batches of 8
  ğŸ“¦ Evaluating batch 1/7 (8 comparisons)
        ğŸ“¦ Batching 8 judge prompts...
Generating responses for 8 prompts using RITS...
  ğŸ“¦ Evaluating batch 2/7 (8 comparisons)
        ğŸ“¦ Batching 8 judge prompts...
Generating responses for 8 prompts using RITS...
  ğŸ“¦ Evaluating batch 3/7 (8 comparisons)
        ğŸ“¦ Batching 8 judge prompts...
Generating responses for 8 prompts using RITS...
  ğŸ“¦ Evaluating batch 4/7 (8 comparisons)
        ğŸ“¦ Batching 8 judge prompts...
Generating responses for 8 prompts using RITS...
  ğŸ“¦ Evaluating batch 5/7 (8 comparisons)
        ğŸ“¦ Batching 8 judge prompts...
Generating responses for 8 prompts using RITS...
  ğŸ“¦ Evaluating batch 6/7 (8 comparisons)
        ğŸ“¦ Batching 8 judge prompts...
Generating responses for 8 prompts using RITS...
  ğŸ“¦ Evaluating batch 7/7 (6 comparisons)
        ğŸ“¦ Batching 6 judge prompts...
Generating responses for 6 prompts using RITS...
     ğŸ“ˆ POSITIVE DRIFT: problem_0_variant_4
     ğŸ“ˆ POSITIVE DRIFT: problem_0_variant_11
     ğŸ“ˆ POSITIVE DRIFT: problem_0_variant_15
     ğŸ“ˆ POSITIVE DRIFT: problem_0_variant_16
        ğŸ“¦ Batching 1 judge prompts...
Generating responses for 1 prompts using RITS...
ğŸ”„ Using RITS batch size: 8
ğŸ§‘â€âš–ï¸ Batched LLM judge evaluation: 20 comparisons in batches of 8
  ğŸ“¦ Evaluating batch 1/3 (8 comparisons)
        ğŸ“¦ Batching 8 judge prompts...
Generating responses for 8 prompts using RITS...
  ğŸ“¦ Evaluating batch 2/3 (8 comparisons)
        ğŸ“¦ Batching 8 judge prompts...
Generating responses for 8 prompts using RITS...
  ğŸ“¦ Evaluating batch 3/3 (4 comparisons)
        ğŸ“¦ Batching 4 judge prompts...
Generating responses for 4 prompts using RITS...
ğŸ’¾ Saved 45 entries after evaluation to ../data/demo_output_semantic.json
âœ… Stage 3 complete: Added LLM judge evaluation with drift analysis to unified file
